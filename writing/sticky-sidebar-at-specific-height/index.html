<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/app.a2f933b7ab5f58f2ecfb.css">code[class*=language-],pre[class*=language-]{color:#657b83;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:#073642}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#fdf6e3}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#93a1a1}.token.punctuation{color:#586e75}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#268bd2}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string,.token.url{color:#2aa198}.token.entity{color:#657b83;background:#eee8d5}.token.atrule,.token.attr-value,.token.keyword{color:#859900}.token.class-name,.token.function{color:#b58900}.token.important,.token.regex,.token.variable{color:#cb4b16}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><meta name="generator" content="Gatsby 2.0.76"/><link rel="shortcut icon" href="/icons-2fb150dc2c43ba7bfab0a2d44ec3f9a1/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/icons-2fb150dc2c43ba7bfab0a2d44ec3f9a1/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/icons-2fb150dc2c43ba7bfab0a2d44ec3f9a1/favicon-32x32.png"/><link rel="manifest" href="/icons-2fb150dc2c43ba7bfab0a2d44ec3f9a1/manifest.json"/><meta name="mobile-web-app-capable" content="yes"/><meta name="theme-color" content="#fff"/><meta name="application-name" content="personal_website_2019"/><link rel="apple-touch-icon" sizes="57x57" href="/icons-2fb150dc2c43ba7bfab0a2d44ec3f9a1/apple-touch-icon-57x57.png"/><link rel="apple-touch-icon" sizes="60x60" href="/icons-2fb150dc2c43ba7bfab0a2d44ec3f9a1/apple-touch-icon-60x60.png"/><link rel="apple-touch-icon" sizes="72x72" href="/icons-2fb150dc2c43ba7bfab0a2d44ec3f9a1/apple-touch-icon-72x72.png"/><link rel="apple-touch-icon" sizes="76x76" href="/icons-2fb150dc2c43ba7bfab0a2d44ec3f9a1/apple-touch-icon-76x76.png"/><link rel="apple-touch-icon" sizes="114x114" href="/icons-2fb150dc2c43ba7bfab0a2d44ec3f9a1/apple-touch-icon-114x114.png"/><link rel="apple-touch-icon" sizes="120x120" href="/icons-2fb150dc2c43ba7bfab0a2d44ec3f9a1/apple-touch-icon-120x120.png"/><link rel="apple-touch-icon" sizes="144x144" href="/icons-2fb150dc2c43ba7bfab0a2d44ec3f9a1/apple-touch-icon-144x144.png"/><link rel="apple-touch-icon" sizes="152x152" href="/icons-2fb150dc2c43ba7bfab0a2d44ec3f9a1/apple-touch-icon-152x152.png"/><link rel="apple-touch-icon" sizes="167x167" href="/icons-2fb150dc2c43ba7bfab0a2d44ec3f9a1/apple-touch-icon-167x167.png"/><link rel="apple-touch-icon" sizes="180x180" href="/icons-2fb150dc2c43ba7bfab0a2d44ec3f9a1/apple-touch-icon-180x180.png"/><link rel="apple-touch-icon" sizes="1024x1024" href="/icons-2fb150dc2c43ba7bfab0a2d44ec3f9a1/apple-touch-icon-1024x1024.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/><meta name="apple-mobile-web-app-title" content="personal_website_2019"/><link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 1)" href="/icons-2fb150dc2c43ba7bfab0a2d44ec3f9a1/apple-touch-startup-image-320x460.png"/><link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 2)" href="/icons-2fb150dc2c43ba7bfab0a2d44ec3f9a1/apple-touch-startup-image-640x920.png"/><link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)" href="/icons-2fb150dc2c43ba7bfab0a2d44ec3f9a1/apple-touch-startup-image-640x1096.png"/><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2)" href="/icons-2fb150dc2c43ba7bfab0a2d44ec3f9a1/apple-touch-startup-image-750x1294.png"/><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 3)" href="/icons-2fb150dc2c43ba7bfab0a2d44ec3f9a1/apple-touch-startup-image-1182x2208.png"/><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 3)" href="/icons-2fb150dc2c43ba7bfab0a2d44ec3f9a1/apple-touch-startup-image-1242x2148.png"/><link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 1)" href="/icons-2fb150dc2c43ba7bfab0a2d44ec3f9a1/apple-touch-startup-image-748x1024.png"/><link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 1)" href="/icons-2fb150dc2c43ba7bfab0a2d44ec3f9a1/apple-touch-startup-image-768x1004.png"/><link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 2)" href="/icons-2fb150dc2c43ba7bfab0a2d44ec3f9a1/apple-touch-startup-image-1496x2048.png"/><link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 2)" href="/icons-2fb150dc2c43ba7bfab0a2d44ec3f9a1/apple-touch-startup-image-1536x2008.png"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.45 'Source Sans Pro',sans-serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:'Source Sans Pro',sans-serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:inherit;font-family:'Merriweather',serif;font-weight:700;text-rendering:optimizeLegibility;font-size:2rem;line-height:2.9rem;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:inherit;font-family:'Merriweather',serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:2.175rem;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:inherit;font-family:'Merriweather',serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.1487rem;line-height:1.45rem;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:inherit;font-family:'Merriweather',serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.45rem;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:inherit;font-family:'Merriweather',serif;font-weight:700;text-rendering:optimizeLegibility;font-size:0.917rem;line-height:1.45rem;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:inherit;font-family:Source Sans Pro,sans-serif;font-weight:400;text-rendering:optimizeLegibility;font-size:0.8409rem;line-height:1.45rem;text-transform:uppercase;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}ul{margin-left:1.45rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.45rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;font-size:0.85rem;line-height:1.45rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}blockquote{margin-left:1.45rem;margin-right:1.45rem;margin-top:0;padding-bottom:0.48333rem;padding-left:0.96667rem;padding-right:0.96667rem;padding-top:0.48333rem;margin-bottom:1.45rem;font-size:1.18921rem;line-height:1.45rem;border-left:0.24167rem solid;border-color:#eaeaeb;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.45rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.45rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.45rem;margin-bottom:calc(1.45rem / 2);margin-top:calc(1.45rem / 2);}li > ul{margin-left:1.45rem;margin-bottom:calc(1.45rem / 2);margin-top:calc(1.45rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.45rem / 2);}code{font-size:0.85rem;line-height:1.45rem;}kbd{font-size:0.85rem;line-height:1.45rem;}samp{font-size:0.85rem;line-height:1.45rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:0.96667rem;padding-right:0.96667rem;padding-top:0.725rem;padding-bottom:calc(0.725rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}a{color:#0c2461;}a:visited{color:#0c2461;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.45rem;color:#eaeaeb;font-weight:400;font-style:normal;}</style><link href="//fonts.googleapis.com/css?family=Libre+Barcode+128+Text:|Merriweather:700|Source+Sans+Pro:400,400i,700" rel="stylesheet" type="text/css"/><style data-styled="bYBvlf ksbQrc jzPAjz gHfQcS drYZet jGolJI jJkEdO" data-styled-version="4.1.3">
/* sc-component-id: layout__Header-sc-12oumoz-0 */
.bYBvlf{border-bottom:1px solid #eaeaeb;text-align:right;line-height:70px;}
/* sc-component-id: layout__LinkHome-sc-12oumoz-1 */
.ksbQrc{float:left;text-shadow:none;background-image:none;-webkit-text-decoration:none;text-decoration:none;margin:0 0 0 30px;}
/* sc-component-id: layout__Logo-sc-12oumoz-2 */
.jzPAjz{display:"inline-block";color:#e55039;margin:0;vertical-align:"middle";font-family:'Libre Barcode 128 Text',Arial,Helvetica,sans-serif;font-size:52px;}
/* sc-component-id: layout__Hamburger-sc-12oumoz-3 */
.gHfQcS{margin:0 40px 0 0;font-size:26px;line-height:70px;display:none;color:#e55039;} @media (max-width:37.4375em){.gHfQcS{display:inline-block;cursor:pointer;}}
/* sc-component-id: layout__Menu-sc-12oumoz-4 */
.drYZet{margin:0 30px 0 0;} @media (max-width:37.4375em){.drYZet{text-align:center;width:100%;display:none;}}
/* sc-component-id: layout__MenuLink-sc-12oumoz-5 */
.jGolJI{-webkit-text-decoration:none;text-decoration:none;margin:0 10px;line-height:70px;} @media (max-width:37.4375em){.jGolJI{display:block;border-top:1px solid #eaeaeb;margin:0;}}
/* sc-component-id: layout__Container-sc-12oumoz-6 */
.jJkEdO{margin:0 auto;max-width:650px;padding:1rem 1rem 0 1rem;}</style><title data-react-helmet="true">Simon Gawlik</title><meta data-react-helmet="true" charSet="utf-8"/><meta data-react-helmet="true" name="description" content="Simon Gawlik Personal Website Home"/><link as="script" rel="preload" href="/component---src-templates-writing-js-44da32ae3be64ba2449b.js"/><link as="script" rel="preload" href="/0-9ac6a65bd5e612ec4a71.js"/><link as="script" rel="preload" href="/app-61613bc7b701c1af75b4.js"/><link as="script" rel="preload" href="/webpack-runtime-d9e994a04b02e9bd7f23.js"/><link as="fetch" rel="preload" href="/static/d/920/path---writing-sticky-sidebar-at-specific-height-0-b-5-108-3PMFHOrVsHb0TPS4uFwmI0Lg94.json" crossOrigin="use-credentials"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div><div class="layout__Header-sc-12oumoz-0 bYBvlf"><a class="layout__LinkHome-sc-12oumoz-1 ksbQrc" href="/"><div class="layout__Logo-sc-12oumoz-2 jzPAjz">SimonGAWLIK</div></a><div class="layout__Hamburger-sc-12oumoz-3 gHfQcS">☰</div><div class="layout__Menu-sc-12oumoz-4 drYZet"><a class="layout__MenuLink-sc-12oumoz-5 jGolJI" href="/about/">About</a><a class="layout__MenuLink-sc-12oumoz-5 jGolJI" href="/writing">Writing</a></div></div><div class="layout__Container-sc-12oumoz-6 jJkEdO"><div><h1>Sticky Sidebar at Specific Height</h1><div><h2>Why you may want it</h2>
<p>Sometimes things on the screen are only supposed to move so much and then stay
where they are. I was working on a task a few months ago where we decided to
implement that behavior. We needed it for a score in the left sidebar
of our results page that follows a long
quiz. We wanted to draw users' focus to the score and keep it at the
center of attention even while users were free to explore the rest of the page.</p>
<p>When the user scrolls down the score scrolls with the rest of the page
until it reaches the bottom of our fixed header. It then stays there while the
main content continues to scroll as the user scrolls. It also detaches
itself from the fixed header when the user scrolls back up.</p>
<p>Too many words... observe:</p>
<iframe style="width:100%;" height="300" src="https://codepen.io/simongawlik/full/VqGmKQ" frameborder="1" allowfullscreen></iframe>
<h2>How you do it</h2>
<p>As always, you can jump right into the working example with code
<a href="https://codepen.io/simongawlik/pen/VqGmKQ">here</a> but we'll walk through it
together below.</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> fixedHeight<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token operator">...</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>header<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">header</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>shim<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
            <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sticky-at-height<span class="token punctuation">"</span></span>
            <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
              <span class="token operator">...</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>fixedHeight
                <span class="token operator">?</span> <span class="token punctuation">{</span>
                    position<span class="token punctuation">:</span> <span class="token string">"fixed"</span><span class="token punctuation">,</span>
                    top<span class="token punctuation">:</span> <span class="token constant">HEADER_HEIGHT</span><span class="token punctuation">,</span>
                  <span class="token punctuation">}</span>
                <span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
           <span class="token punctuation">></span></span><span class="token plain-text">
            some menu items that get sticky when they reach the header
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
            <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>side-shim<span class="token punctuation">"</span></span>
            <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
              <span class="token operator">...</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>fixedHeight
                <span class="token operator">?</span> <span class="token punctuation">{</span> width<span class="token punctuation">:</span> <span class="token constant">SIDE_MENU_WIDTH</span> <span class="token punctuation">}</span>
                <span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
          <span class="token punctuation">></span></span><span class="token plain-text">

          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>reference<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>lots-o-text<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">
              imagine a whole bunch of text.
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>We're tracking whether the <code class="language-text">div</code> containing the sidebar, <code class="language-text">.sticky-at-height</code>
should be fixed under the header in <code class="language-text">App</code>'s component state. This allows
us to conditionally apply styles to the elements that will make it look seamless.</p>
<p>Let's walk through the structure of the elements real quick. The header comes
first and we fix it to the top of the screen.</p>
<div class="gatsby-highlight" data-language="css"><pre class="language-css"><code class="language-css"><span class="token selector">.header</span> <span class="token punctuation">{</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Since we used <code class="language-text">position: fixed;</code> We now add a shim of the same dimensions into the DOM.</p>
<div class="gatsby-highlight" data-language="css"><pre class="language-css"><code class="language-css"><span class="token selector">.shim</span> <span class="token punctuation">{</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>This way we don't have to worry about the top of the container being hidden
behind the header.</p>
<p>Now we have three <code class="language-text">div</code>s inside of our container, <code class="language-text">.sticky-at-height</code>,
<code class="language-text">#reference</code>, and <code class="language-text">.side-shim</code>. <code class="language-text">.side-shim</code> only gets a width style applied to
it when <code class="language-text">fixedHeight</code> is true. Similarly, <code class="language-text">#reference</code> only has its position
fixed when <code class="language-text">fixedHeight</code> is true. We need to include <code class="language-text">.side-shim</code> because fixing
<code class="language-text">.sticky-at-height</code> removes it from the regular flow of inline elements and
something needs to take its place. There are many other ways to do this without
resorting to shims, like floating elements differently, using tables, or flexbox.</p>
<p>With that out of the way, let's turn to how we track the position of a DOM
element to set a variable in state. The EventTarget Web API provides us with
<a href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener"><code class="language-text">addEventListener</code></a>
and <code class="language-text">removeEventListener</code> which let's us tell the browser to (1) get back to us if
a specific event occurs and (2) what to do then.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleScroll<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleScroll<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span></code></pre></div>
<p>Any event listener that was added should also be removed (<a href="https://stackoverflow.com/questions/6033821/do-i-need-to-remove-event-listeners-before-removing-elements/37096563#37096563">why?</a>).
In React we need to do this on <code class="language-text">componentWillUnmount</code>.
The event listener waits for the user to scroll and whenever that happens, to calls
<code class="language-text">handleScroll</code>.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">  <span class="token function-variable function">handleScroll</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> stickyAtHeight <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'reference'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> top <span class="token operator">=</span> <span class="token constant">HEADER_HEIGHT</span><span class="token punctuation">;</span>

    <span class="token comment">// sometimes element hasn't loaded yet</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>stickyAtHeight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> rect <span class="token operator">=</span> stickyAtHeight<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      top <span class="token operator">=</span> rect<span class="token punctuation">.</span>top<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>top <span class="token operator">&lt;</span> <span class="token constant">HEADER_HEIGHT</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>fixedHeight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> fixedHeight<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>top <span class="token operator">>=</span> <span class="token constant">HEADER_HEIGHT</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>fixedHeight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> fixedHeight<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span></code></pre></div>
<p>This function tries to get the y-coordinate of the top of the <code class="language-text">div</code> with the id
<code class="language-text">reference</code>. Okay, this is clearly a lof of code for something that sounds so
simple... what's up with that? First, we have to make sure that the element
even exists and some users might start scrolling before the page has loaded the
element. If or when it exists, we try to get its coordinates and in particular
the y-coordinate of the top.</p>
<p>Now remember that the coordinate system in the browser has 0 in the upper
lefthand corner and y-coordinates increase as you go down the screen. In our
case this means that when the reference div loads, its y-value is positive
and we want to know when it scrolls past a currently less positive y-value (our
fixed header).</p>
<p>That's what the last <code class="language-text">if</code>-statement inside <code class="language-text">handleScroll</code> checks. Once <code class="language-text">top</code> is less
than <code class="language-text">HEADER_HEIGHT</code>, we know that the <code class="language-text">.sticky-at-height</code> div should stop
scrolling. And if the div is currently sticking to the header and the user scrolls
back up, we want to make sure to unstick it, which is what the <code class="language-text">else if</code>-statement
checks.</p>
<p>If you've been super-attentive and you haven't just been trying to copy down this
code to get it working in your non-toy production code for a deadline that's approaching you
with the business-like indifference of a comet which forced dinosaurs into evolving
into birds, then you might have a question for me now.</p>
<p>"Simon, you're tracking the height of the <code class="language-text">div#reference</code> to set the
height of the <code class="language-text">div.sticky-at-height</code>! (╯°□°)╯︵ ┻━┻. Why would you not just
track it on the element itself instead of needing the extra complication?"</p>
<p>This is left as an exercise for the reader... No, seriously, the reason for it
is that if you track the height of <code class="language-text">div.sticky-at-height</code> directly, you'll
find it flickering and not doing what you'd expect. It flickers between being
stuck to the bottom of header and scrolling past it. The height that the browser
perceives alternates quickly between fixed and relative positioning. Instead
we use the other div as a reference point since that div will always be positioned
relatively and it's height will move continuously instead of being forced to jump.</p>
<h2>Conclusion</h2>
<p>In this post we walked through how to create a <code class="language-text">div</code> that only moves within a certain visual
range in the browser using React and the EventTarget Web API. Similar approaches
would work in plain JS or using other frameworks. If you find any errors</p>
<h2>Tidbits</h2>
<p>You'll want to change some of my magic numbers to match your styles. You'll also
be able to use CSS preprocessors to leverage CSS variables.</p>
<p>Conditional styling in JS is a little performance hit.</p>
<p>I'd love to play with <a href="https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Creating_and_triggering_events">custom events</a> in the future and see what neat things could be
done with it.</p></div></div></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-writing-js","jsonName":"writing-sticky-sidebar-at-specific-height-0b5","path":"/writing/sticky-sidebar-at-specific-height/"};window.dataPath="920/path---writing-sticky-sidebar-at-specific-height-0-b-5-108-3PMFHOrVsHb0TPS4uFwmI0Lg94";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app.a2f933b7ab5f58f2ecfb.css","/app-61613bc7b701c1af75b4.js"],"component---src-templates-writing-js":["/component---src-templates-writing-js-44da32ae3be64ba2449b.js"],"component---src-pages-about-js":["/component---src-pages-about-js-82e7d5f1c25241ea38ef.js"],"component---src-pages-index-js":["/component---src-pages-index-js-af88c68e21ec58598644.js"],"component---src-pages-writing-index-js":["/component---src-pages-writing-index-js-fd13ef70c1d6888f14f7.js"],"pages-manifest":["/pages-manifest-ab3df57012008c8b31af.js"]};/*]]>*/</script><script src="/webpack-runtime-d9e994a04b02e9bd7f23.js" async=""></script><script src="/app-61613bc7b701c1af75b4.js" async=""></script><script src="/0-9ac6a65bd5e612ec4a71.js" async=""></script><script src="/component---src-templates-writing-js-44da32ae3be64ba2449b.js" async=""></script></body></html>